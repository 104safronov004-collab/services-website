<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Услуги</title>

<link rel="stylesheet" href="css/style.css">

<!-- Anti-flicker -->
<style>.varioqub-antiflicker { opacity: 0 !important; transition: opacity 0.3s; }</style>

<script>
(function(a,n,t,i,f,li){
    a[t]=a[t]||function(){(a[t].a=a[t].a||[]).push(arguments)};
    n.classList.add(i);
    li.callback=function(){ n.classList.remove(i); };
    a[t].antiFlicker=li;
    setTimeout(li.callback,f);
})(window, document.documentElement,'ymab','varioqub-antiflicker',4000,{});
</script>

<!-- VarioQub -->
<script>
(function(e,x,pe,r,i,me,nt){
    e[i]=e[i]||function(){(e[i].a=e[i].a||[]).push(arguments)};
    me=x.createElement(pe); me.async=1; me.src=r;
    nt=x.getElementsByTagName(pe)[0];
    nt.parentNode.insertBefore(me,nt);
})(window,document,'script','https://abt.s3.yandex.net/expjs/latest/exp.js','ymab');
</script>
</head>
<body class="varioqub-antiflicker">

<header> ... </header>
<main> ... </main>

<script>
// Ждём, пока ymab полностью загрузится
function waitForYmab(callback) {
    if (typeof ymab !== 'undefined') {
        callback();
    } else {
        setTimeout(function(){ waitForYmab(callback); }, 50);
    }
}

waitForYmab(function(){
    // Инициализация метрики
    ymab('metrika.106324646','init', function() {
        // Логика показа кнопки
        ymab('getFlags', function(flagsArray){
            if (!Array.isArray(flagsArray)) return;
            const flagObj = flagsArray.find(f => f.n === 'show_free_button');
            if (!flagObj) return;
            const showFree = flagObj.v === true || flagObj.v === 'true';
            if (showFree) {
                document.querySelectorAll('.try-free-btn').forEach(btn => btn.style.display='inline-block');
            }
        });
    });
});
</script>
<script src="js/main.js"></script>
</body>
</html>
